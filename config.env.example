###############################################
# Homelab – Configuration File
# File: config.env
###############################################

#
# === Global Homelab Settings ===
#

# Primäre Domain für alle Dienste
HOMELAB_DOMAIN=homelab.example.com

# Beispiel: Gitea URL
GITEA_URL=gitea.homelab.example.com
GITEA_NAMESPACE=gitea


#
# === Gitea Admin Bootstrap ===
#
GITEA_ADMIN_USER=admin
GITEA_ADMIN_PASSWORD=changeme
GITEA_ADMIN_EMAIL=you@example.com


#
# === K3s Configuration ===
#

# Node role: server / agent
K3S_NODE_ROLE=server

# Falls du eine IP explizit binden willst (optional)
K3S_ADVERTISE_ADDRESS=

# Welche Version? Leer lassen = latest
K3S_VERSION=


#
# === cert-manager Configuration ===
#

# lokale Chart-Referenz (in deinem Repo)
CERT_MANAGER_CHART_REF=charts/cert-manager
CERT_MANAGER_RELEASE_NAME=cert-manager
CERT_MANAGER_NAMESPACE=cert-manager

# Sollen die CRDs installiert werden? (true/false)
CERT_MANAGER_CRDS_ENABLED=true

# Optional: zusätzliche Helm values
CERT_MANAGER_VALUES_FILE=


#
# === Step-CA (External CA) Configuration ===
#

# Deine externe CA – läuft auf dem Raspberry Pi / lokal
STEP_CA_URL=https://192.168.1.10:9000

# Provisioner-Name (typisch: admin)
STEP_CA_PROVISIONER=admin

# Root-CA-Datei (optional – meist leer lassen, da Nodes CA schon vertrauen)
STEP_CA_ROOT_FILE=

# Provisioner-Key-Datei (JSON von "step ca init")
STEP_CA_PROVISIONER_KEY_FILE=/root/provisioner_key.json

# Passwort für obigen Provisioner (als Datei!)
STEP_CA_PROVISIONER_PASSWORD_FILE=/root/step-ca-provisioner.password


#
# === step-issuer Helm Chart ===
#
STEP_ISSUER_CHART_REF=smallstep/step-issuer
STEP_ISSUER_RELEASE_NAME=step-issuer
STEP_ISSUER_NAMESPACE=step-issuer


#
# === Ingress/TLS Defaults ===
#

# Global TLS aktivieren?
INGRESS_TLS_ENABLED=true

# Default TLS Secret für Dienste, die kein eigenes Secret haben
INGRESS_DEFAULT_TLS_SECRET=homelab-default-tls


#
# === Workload / App Configuration ===
#

# Wo liegen deine YAML-Manifeste?
MANIFEST_DIR=manifests

# Alle Helm Charts, die installiert werden sollen
# Format:
#   "release:chartRef:namespace:extraArgs"

CHARTS=(
  # Gitea lokaler Chart
  "gitea:charts/gitea:${GITEA_NAMESPACE}:\
    --set-string ingress.host=${GITEA_URL} \
    --set-string gitea.admin.username=${GITEA_ADMIN_USER} \
    --set-string gitea.admin.password=${GITEA_ADMIN_PASSWORD} \
    --set-string gitea.admin.email=${GITEA_ADMIN_EMAIL}"

  # cert-manager lokaler Chart
  "cert-manager:${CERT_MANAGER_CHART_REF}:${CERT_MANAGER_NAMESPACE}:--set crds.enabled=${CERT_MANAGER_CRDS_ENABLED}"

  # step-issuer Helm Chart (spricht später mit step-ca)
  "step-issuer:${STEP_ISSUER_CHART_REF}:${STEP_ISSUER_NAMESPACE}:"
)
